{"ast":null,"code":"import React,{useState}from'react';import Navbar from'../components/Navbar';import Footer from'../components/Footer';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LoginPage=()=>{const[dni,setDni]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState('');const navigate=useNavigate();const handleSubmit=async e=>{e.preventDefault();try{const response=await fetch('http://localhost:5000/api/auth/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({dni,password})});if(!response.ok){throw new Error('Credenciales incorrectas');}const data=await response.json();localStorage.setItem('token',data.token);localStorage.setItem('rol',data.rol);// Redirige según el rol\nif(data.rol==='alumno'){window.location.href='/alumno/dashboard';}else if(data.rol==='tutor_profesor'){window.location.href='/profesor/dashboard';}else if(data.rol==='tutor_empresa'){window.location.href='/empresa/dashboard';}}catch(err){console.error(err);setError('DNI o contraseña incorrectos');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col min-h-screen\",children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold text-center text-red-800 mb-4 p-4\",children:\"Iniciar sesi\\xF3n\"}),/*#__PURE__*/_jsx(\"main\",{className:\"flex items-center justify-center flex-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 p-8 border border-red-300 rounded-2xl shadow-md w-full max-w-md\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"flex flex-col gap-4\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"dni\",className:\"block text-gray-800 font-medium mb-2\",children:\"Usuario\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"dni\",value:dni,onChange:e=>setDni(e.target.value),className:\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-maroon-500\",placeholder:\"Introduce tu dni\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"block text-gray-700 font-medium mb-2\",children:\"Contrase\\xF1a\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",value:password,onChange:e=>setPassword(e.target.value),className:\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-maroon-300\",placeholder:\"Introduce tu contrase\\xF1a\"})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600\",children:error}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-maroon-600 hover:bg-maroon-700 bg-red-800 text-white font-semibold py-2 px-4 rounded-lg transition duration-300\",children:\"Entrar\"})]})})}),/*#__PURE__*/_jsx(Footer,{})]});};export default LoginPage;","map":{"version":3,"names":["React","useState","Navbar","Footer","useNavigate","jsx","_jsx","jsxs","_jsxs","LoginPage","dni","setDni","password","setPassword","error","setError","navigate","handleSubmit","e","preventDefault","response","fetch","method","headers","body","JSON","stringify","ok","Error","data","json","localStorage","setItem","token","rol","window","location","href","err","console","className","children","onSubmit","htmlFor","type","id","value","onChange","target","placeholder"],"sources":["/home/mzs/Documentos/TFM_PracGes/PracGes/client/src/pages/LoginPage.jsx"],"sourcesContent":["import React, {useState} from 'react';\nimport Navbar from '../components/Navbar';\nimport Footer from '../components/Footer';\nimport { useNavigate } from 'react-router-dom';\n\nconst LoginPage = () => {\n  const [dni, setDni] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const navigate = useNavigate();\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n  try {\n    const response = await fetch('http://localhost:5000/api/auth/login', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ dni, password }),\n    });\n\n    if (!response.ok) {\n      throw new Error('Credenciales incorrectas');\n    }\n\n    const data = await response.json();\n\n    localStorage.setItem('token', data.token);\n    localStorage.setItem('rol', data.rol);\n\n    // Redirige según el rol\n    if (data.rol === 'alumno') {\n      window.location.href = '/alumno/dashboard';\n    } else if (data.rol === 'tutor_profesor') {\n      window.location.href = '/profesor/dashboard';\n    } else if (data.rol === 'tutor_empresa') {\n      window.location.href = '/empresa/dashboard';\n    }\n\n  } catch (err) {\n    console.error(err);\n    setError('DNI o contraseña incorrectos');\n  }\n};\n\n\n    return (\n        <div className=\"flex flex-col min-h-screen\">\n            <Navbar />\n            <h2 className=\"text-3xl font-bold text-center text-red-800 mb-4 p-4\">Iniciar sesión</h2>\n\n            <main className=\"flex items-center justify-center flex-1\">\n      \n        \n        <div className=\"bg-red-50 p-8 border border-red-300 rounded-2xl shadow-md w-full max-w-md\">\n        <form className=\"flex flex-col gap-4\" onSubmit={handleSubmit}>\n          <div>\n            <label htmlFor=\"dni\" className=\"block text-gray-800 font-medium mb-2\">Usuario</label>\n            <input\n              type=\"text\"\n              id=\"dni\"\n              value={dni}\n              onChange={(e) => setDni(e.target.value)}\n              className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-maroon-500\"\n              placeholder=\"Introduce tu dni\"\n            />\n          </div>\n\n          <div>\n            <label htmlFor=\"password\" className=\"block text-gray-700 font-medium mb-2\">Contraseña</label>\n            <input\n              type=\"password\"\n              id=\"password\"\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-maroon-300\"\n              placeholder=\"Introduce tu contraseña\"\n            />\n          </div>\n              {error && <p className=\"text-red-600\">{error}</p>}\n          <button\n            type=\"submit\"\n            className=\"bg-maroon-600 hover:bg-maroon-700 bg-red-800 text-white font-semibold py-2 px-4 rounded-lg transition duration-300\"\n          >\n            Entrar\n          </button>\n        </form>\n      </div>\n    \n            </main>\n            <Footer />\n        </div>\n    );\n};\nexport default LoginPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}